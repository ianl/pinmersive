{% extends 'users/base.html' %}
{% load i18n %}
{% load template_tags %}

{% block user_profile_content %}
    <div class="user-profile-boards-container">
    
    {% if user == user_profile.user %}
        <div class="row">
            {% include 'boards/modal_forms/create.html' with form=board_form %}
            <hr>     
        </div>
    {% endif %} 
        
        <div class="row">
            <div class="public-boards-container">
                {% for board in public_boards %}
                    <div class="board-wrapper">

                        <a href="{% url 'users:boards:show' user_profile.user.username board.name %}">
                            {% for pin in board.pins.all %}
                                <div class="pin">
                                    <img src="/media/{{ pin.image_file }}" alt="">
                                </div>
                            {% endfor %}
                            
                            <h2>{{ board.name }}</h2>

                            {% blocktrans count counter=board.pins.count %}
                                <p><b>{{ counter }}</b> Pin</p>
                            {% plural %}
                                <p><b>{{ counter }}</b> Pins</p>
                            {% endblocktrans %}
                        </a>
                        
                    {% if user != user_profile.user %}
                        {% if not user.user_profile|is_following_board:board %}
                            {% include 'boards/forms/follow.html' with username=board.user_profile.user.username board_name=board.name %}
                        {% else %}
                            {% include 'boards/forms/unfollow.html' with username=board.user_profile.user.username board_name=board.name %}
                        {% endif %}
                    {% endif %}

                    </div>
                {% endfor %}

            </div>            
        </div>

        
        <hr>

    {% if user == user_profile.user %}
        <div class="row">
            <div class="secret-boards-container">

                <h1><span class="label label-default"><span class="glyphicon glyphicon-lock"></span> Secret Boards</span></h1>

                <p>Only you (and people you invite) can see these boards.</p>

                {% for board in secret_boards %}
                    <div class="board-wrapper">

                        <a href="{% url 'users:boards:show' user_profile.user.username board.name %}">
                            {% for pin in board.pins.all %}
                                <div class="pin">
                                    <img src="/media/{{ pin.image_file }}" alt="">
                                </div>
                            {% endfor %}
                            
                            <h2>{{ board.name }}</h2>

                            {% blocktrans count counter=board.pins.count %}
                                <p><b>{{ counter }}</b> Pin</p>
                            {% plural %}
                                <p><b>{{ counter }}</b> Pins</p>
                            {% endblocktrans %}
                        </a>

                    </div>
                {% endfor %}

            </div>            
        </div>
    {% endif %}
        
    </div>
{% endblock %}