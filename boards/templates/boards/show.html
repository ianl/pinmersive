{% extends 'base.html' %}
{% load i18n %}
{% load static %}

{% block content %}
    <div class="board-container">

        <div class="board-header">
        {% if user != board.user_profile.user %}

            {% include 'boards/forms/follow.html' with username=board.user_profile.user.username board_name=board.name %}

            {% include 'boards/forms/unfollow.html' with username=board.user_profile.user.username board_name=board.name %}

        {% else %}
            <div class="boards-edit-button">
                <form action="{% url 'users:boards:edit' board.user_profile.user.username board.name %}" method="GET">
                    <input type="submit" value="Edit board">
                </form>  
            </div>
        {% endif %}
        </div>

        <div class="board-content">

            <h1>{{ board.name }}</h1>

            {% blocktrans count counter=board.pins.count %}
                <p><b>{{ counter }}</b> Pin</p>
            {% plural %}
                <p><b>{{ counter }}</b> Pins</p>
            {% endblocktrans %}

            <a href="{% url 'users:boards:followers' board.user_profile.user.username board.name %}">
                {% blocktrans count counter=board.followers|length %}
                    <p><b>{{ counter }}</b> Follower</p>
                {% plural %}
                    <p><b>{{ counter }}</b> Followers</p>
                {% endblocktrans %}
            </a>

            <div class="user-profile-avatar">
                <a href="{% url 'users:user' board.user_profile.user.username %}">
                    {% if board.user_profile.avatar %}
                        <img src="{{ board.user_profile.avatar.url }}" alt="" height="60" width="60">
                    {% else %}
                        <img src="{% static 'images/default-avatar.png' %}" alt="" height="60" width="60">
                    {% endif %}
                </a>
            </div>

            <p>{{ board.description }}</p>

            <div class="pins-container">
            {% if user == board.user_profile.user %}
                {% include 'pins/forms/create.html' with username=board.user_profile.user.username %}
            {% endif %}

                {% for pin in board.pins.all %}
                    <div class="pin-wrapper">
                        <a class="pinLink" href="{% url 'pins:show' pin.id %}">
                            <img src="/media/{{ pin.image_file }}" alt="">
                        </a> 
                    </div>
                {% endfor %}
            </div>
            
        </div>

    </div>
{% endblock %}